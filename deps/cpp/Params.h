#ifndef PARAMS_H
#define PARAMS_H

#include "Polygon.h"
#include "Block.h"
#include <math.h>
#include <time.h>
#include <iostream>
#include <fstream>
#include <vector>
#include <string>
#include <set>
#include <iterator> 
#include <random>
#include <climits>
#include "WGS84toCartesian.hpp"
#include "json.hpp"
using json = nlohmann::json;
using std::string;

class Params
{
public:
	/* INPUT VARIABLES AND PARAMETERS OF THE GENERATOR */
	string cityName;			// Name of the dataset
	string instanceName;		// Name of the input file representing the original data (without the geojson extension)
    string depotPosition;		// Depot position (C, NW, NE, SW, SE)
	int sizeTrainingSet;        // Number of Scenarios generated by Block
	int seed;					// Random seed
	int targetSizeOfDistrict;   // Target size of district
	float probaCustomerDemand;  // Probability of a customer to be a customer
	/* INPUT DATA */
	mt19937 generator;							 // Random number generator
	Point referencePoint = {0, 0};				 // Point representing the reference position in XY coordinates (always 0,0 per definition)

	map<int,double> probaCustomerDemandPerTargetSizeDistrict; // Probability of a customer to have a demand per target size of district
	
	array<double, 2> referenceLongLat;			 // Reference longitude and latitude to calculate the Cartesian coordinates (for example, Birminham is {-1.902663, 52.487029})
	vector<Block> blocks;						 // Information on the blocks

	double minX = 1.e30;						 // Minimum X coordinate of the vertices of the entire dataset
	double maxX = -1.e30;						 // Maximum X coordinate of the vertices of the entire dataset
	double minY = 1.e30;						 // Minimum Y coordinate of the vertices of the entire dataset
	double maxY = -1.e30;						 // Maximum Y coordinate of the vertices of the entire dataset
	int instanceSize;						 // Number of vertices in the instance
	/* OUTPUT DATA */
	string outputFolderPath; // Path to the output folder

	/* FUNCTIONS TO READ FILE AND SET UP THE DATA STRUCTURES */
	 // Blocks which have been flagged to be ignored in the datasets (to avoid connectivity issues)
	void readBlocksJSON();
	void exportBlockScenarios(string outputFolderPath);        // Export instance data, mainly Scenarios for each Block
    
	Params(string Instance_evalution, string inputFolderPath); // Constructor
};

#endif
